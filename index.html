<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iframe Yt</title>
    <link rel="stylesheet" href="style.css">
    <link rel="shortcut icon" href="./assets/Youtube_logo.png" type="image/x-icon">
</head>
<body>
    <script>
        function formatar() {

            let input = document.getElementById("input") , formatado = document.getElementById("formatado")
            var string = input.value;
            let iframe , baseUrl , videoId ;

            string = string.replace("https://" , "")


            if(string === ""){
                alert("Insira uma URL no campo")
                return;
            }

            if( string.includes("watch?v=")){
                baseUrl = 'www.youtube.com'
                videoId = string.slice((string.indexOf('?v=') + 3 ), string.length)
            }
            else{
                baseUrl = 'www.youtube.com'
                videoId = string.slice((string.indexOf('/') + 1 ), string.indexOf('?'))
            }

            iframe = `<iframe width="560" height="315" src="https://${baseUrl}/embed/${videoId}?rel=0" title="YouTube video player"    sandbox="allow-scripts allow-same-origin allow-presentation" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>`

            formatado.value = `<div class="embed-responsive embed-responsive-16by9 video-container" style="text-align:center">${iframe}</div>`

            copiar();
        }

        function copiar() {
            // Get the text field
            let input = document.getElementById("input") , formatado = document.getElementById("formatado")

            var copyText = formatado.value;


            // Copy the text inside the text field
            navigator.clipboard.writeText(copyText);

            setTimeout(() => {
                alert("Texto copiado");
            }, 250);
        }
    </script>

    <div class="article">
        <h1>Ferramenta para extrair iframe</h1>
        <div class="inputs">
            <input class="mainInput" id="input" type="text" placeholder="Cole o URL do video">
            <button class="btn btn-primary" onclick="formatar();">Formatar</button>
            <p>Url Formatada ⬇️</p>
            <input class="secondInput" id="formatado" type="text" placeholder="Clique em enviar para formatar">
        </div>
    </div>

</body>
</html>
